<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: services/getData.jsx</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: services/getData.jsx</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import React, { useState, createContext, useEffect } from "react";
import UserMapper from "../modelization/mapperuser.jsx";
import UserSessionMapper from "../modelization/mappersessionsdata.jsx";
import UserPerformanceMapper from "../modelization/mapperuserperfdata.jsx";
import UserActivitiesMapper from "../modelization/mapperuseractdata.jsx";

import PropTypes from "prop-types";

export const Context = createContext();
/**
 * Provider of the data for the app using context, state and fetch
 * @param {object} children
 * @returns { HtmlElements} returning the Context.Provider with the value of the state and the setState functions
 */
export const ApiFetch = ({ children }) => {
	const [userSwitch, setUserSwitch] = useState(false);
	const [userId, setUserId] = useState(null);
	const [user, setUser] = useState(null);
	const [activity, setActivity] = useState(null);
	const [averageSessions, setAverageSessions] = useState(null);
	const [performance, setPerformance] = useState(null);

	useEffect(() => {
		if (userId) {
			// for using mocked data
			//
			fetch(`../${userId}.json`).then((response) =>
				//fetch(`http://localhost:3000/user/${userId}`).then((response) =>
				response
					.json()
					.then(({ data }) => {
						setUser(UserMapper.convertToUser(data));
						console.log(data);
					})
					.catch((error) => console.log(error))
			);
			//for using mocked data
			fetch(`../${userId}/activity.json`).then((response) =>
				//fetch(`http://localhost:3000/user/${userId}/activity`).then((response) =>
				response
					.json()
					.then(({ data }) => {
						setActivity(UserActivitiesMapper.convertToActivities(data));
					})
					.catch((error) => console.log(error))
			);
			//for using mocked data
			fetch(`../${userId}/average-sessions.json`).then((response) =>
				//fetch(`http://localhost:3000/user/${userId}/average-sessions`).then((response) =>
				response
					.json()
					.then(({ data }) => {
						setAverageSessions(UserSessionMapper.convertToSession(data));
					})
					.catch((error) => console.log(error))
			);
			//for using mocked data
			fetch(`../${userId}/performance.json`).then((response) =>
				//fetch(`http://localhost:3000/user/${userId}/performance`).then((response) =>
				response
					.json()
					.then(({ data }) => {
						setPerformance(UserPerformanceMapper.convertToUserPerf(data));
					})
					.catch((error) => console.log(error))
			);
		}
	}, [userId]);

	return (
		&lt;Context.Provider
			value={{
				userSwitch,
				setUserSwitch,
				userId,
				setUserId,
				user,
				setUser,
				activity,
				setActivity,
				averageSessions,
				setAverageSessions,
				performance,
				setPerformance,
			}}
		>
			{children}
		&lt;/Context.Provider>
	);
};

ApiFetch.propTypes = {
	children: PropTypes.object.isRequired,
};
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="module.exports_module.exports.html">exports</a></li></ul><h3>Global</h3><ul><li><a href="global.html#ApiFetch">ApiFetch</a></li><li><a href="global.html#AsideCard">AsideCard</a></li><li><a href="global.html#BarChartActivity">BarChartActivity</a></li><li><a href="global.html#CardCharts">CardCharts</a></li><li><a href="global.html#convertToActivities">convertToActivities</a></li><li><a href="global.html#convertToSession">convertToSession</a></li><li><a href="global.html#convertToUser">convertToUser</a></li><li><a href="global.html#convertToUserPerf">convertToUserPerf</a></li><li><a href="global.html#Dashboard">Dashboard</a></li><li><a href="global.html#GreyArea">GreyArea</a></li><li><a href="global.html#Header">Header</a></li><li><a href="global.html#LineChartAvgSessions">LineChartAvgSessions</a></li><li><a href="global.html#RadarChartPerf">RadarChartPerf</a></li><li><a href="global.html#RadialChart">RadialChart</a></li><li><a href="global.html#Sidenav">Sidenav</a></li><li><a href="global.html#SidenavButton">SidenavButton</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.10</a> on Thu May 26 2022 13:21:56 GMT+0200 (heure d’été d’Europe centrale)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
